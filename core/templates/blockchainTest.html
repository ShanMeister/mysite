{% extends 'base2.html' %}
{% load static %}
{% load bootstrap3 %}
{% bootstrap_css %}
{% bootstrap_javascript %}

{% block content %}

    <html>
    <head>
        <!--
        src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"
        <script type="text/javascript" src="https://github.com/ethereumjs/browser-builds/blob/master/dist/ethereumjs-tx/ethereumjs-tx-1.3.3.min.js"></script>
        -->
        <script src="{% static 'blockchain/node_modules/*' %}" type="text/javascript"></script>


        <script type="text/javascript">

            var Web3 = require('web3');
            const ethereumUri = 'https://ropsten.infura.io/v3/866424fc5e1643f0837915f33cdb8565';
            var web3 = new Web3(ethereumUri);


            // solidity code code

            function createExampleContract() {

                var address = '0xCdC04e82039B4dE2be2E2803cc1CE00A7900854C';
                document.write("Web3 : " + web3);
                /*
                web3.eth.getBalance(address, (err, bal) => {
                    document.write('account  balance:', web3.utils.fromWei(bal, 'ether'))
                });
                */
                //document.write(eb3);
            }

            function callExampleContract() {
                // this should be generated by ethereum
                var param = parseInt(document.getElementById('value').value);
                // call the contract
                var res = myContract.multiply(param);
                document.getElementById('result').innerText = res.toString(10);
            }

        </script>
    </head>
    <body>
    <h1>contract</h1>
    <div id="code"></div>
    <div id="status"></div>
    <div id='create'>
        <button type="button" onClick="createExampleContract();">create example contract</button>
    </div>
    <div id='call' style='visibility: hidden;'>
        <input type="number" id="value" onkeyup='callExampleContract()'></input>
    </div>
    <div id="result"></div>
    </body>
    </html>

{% endblock %}
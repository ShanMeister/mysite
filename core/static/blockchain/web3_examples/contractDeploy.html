<html>

<head>

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>
<script type="text/javascript">
    var Web3 = require('web3');
    var web3 = new Web3('https://ropsten.infura.io/v3/866424fc5e1643f0837915f33cdb8565');
    //web3.setProvider(new web3.providers.HttpProvider("http://localhost:8545"));
    /*
    // solidity code code
    const path = require('path');
    const fs =  require('fs');
    const solc = require('solc');
    const contractPath = path.resolve('/mnt/d','blockchian','smartSponsor.sol');
    const source =fs.readFileSync(contractPath,'UTF-8');

    var compiled = web3.eth.compile.solidity(source);
    var code = compiled.code;
    // contract json abi, this is autogenerated using solc CLI
    var abi = compiled.info.abiDefinition;
    */
    var code ="{
    "linkReferences": {},
    "object": "60806040526040516060806106c783398101604090815281516020830151919092015160008054600160a060020a0319163317815560059290925560029190915560018054600160a060020a03909316600160b060020a03199215157601000000000000000000000000000000000000000000000260b060020a60ff0219909416939093179190911691909117905542600355610626806100a16000396000f3006080604052600436106100cf5763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416630b97bc8681146100d457806312f53950146100fb578063403c9fa814610124578063522e117714610139578063590e1ae31461014e57806376bf8044146101655780638a81694c146101705780638da5cb5b146101a1578063953b8fb8146101b6578063a46f7d19146101cb578063ac124081146101e0578063b13564881461021e578063c24a0f8b14610233578063e77ef21f14610248575b600080fd5b3480156100e057600080fd5b506100e961025d565b60408051918252519081900360200190f35b34801561010757600080fd5b50610110610263565b604080519115158252519081900360200190f35b34801561013057600080fd5b506100e9610273565b34801561014557600080fd5b50610110610278565b34801561015a57600080fd5b50610163610288565b005b6101636004356103bc565b34801561017c57600080fd5b50610185610461565b60408051600160a060020a039092168252519081900360200190f35b3480156101ad57600080fd5b50610185610470565b3480156101c257600080fd5b506100e961047f565b3480156101d757600080fd5b506100e9610485565b3480156101ec57600080fd5b506101f860043561048b565b60408051938452600160a060020a03909216602084015282820152519081900360600190f35b34801561022a57600080fd5b506100e96104b5565b34801561023f57600080fd5b506100e96104bb565b34801561025457600080fd5b506101636104c1565b60035481565b60015460a060020a900460ff1681565b303190565b60015460a860020a900460ff1681565b60008054600160a060020a0316331415806102ac575060015460a860020a900460ff165b806102c0575060015460a060020a900460ff165b806102cd57506005543031115b156102d757600080fd5b5060005b60025481101561037457600081815260086020526040902060018101549054600160a060020a03909116906108fc90606490606002049081150290604051600060405180830381858888f150506000805485825260086020526040808320549051600160a060020a039092169550606460049091020480156108fc029450925090818181858888f19350505050508060010190506102db565b506001805475ff0000000000000000000000000000000000000000001974ff00000000000000000000000000000000000000001990911660a060020a171660a860020a179055565b3415806103d2575060015460a860020a900460ff165b806103e6575060015460a060020a900460ff165b156103f057600080fd5b60408051606081018252348152336020808301918252828401948552600280546000908152600890925293902091518255516001808301805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a039093169290921790915592519082015580549091019055565b600154600160a060020a031681565b600054600160a060020a031681565b60055481565b60025481565b6008602052600090815260409020805460018201546002909201549091600160a060020a03169083565b60045490565b60045481565b600054600160a060020a0316331415806104e4575060015460a860020a900460ff165b806104f8575060015460a060020a900460ff165b8061050557506005543031105b1561050f57600080fd5b60018054760100000000000000000000000000000000000000000000900460ff161515146105a85760646007303102046006556064605d3031020460075560008054600654604051600160a060020a039092169281156108fc029290818181858888f15050600154600754604051600160a060020a03909216945080156108fc02935091506000818181858888f19350505050506105d3565b60008054604051600160a060020a0390911691303180156108fc02929091818181858888f150505050505b6001805475ff000000000000000000000000000000000000000000191660a860020a1790555600a165627a7a7230582011f87311521f22d06e122863226f537a9bf4d84b43526735eb3e65dab7a707620029",
    "opcodes": "PUSH1 0x80 PUSH1 0x40 MSTORE PUSH1 0x40 MLOAD PUSH1 0x60 DUP1 PUSH2 0x6C7 DUP4 CODECOPY DUP2 ADD PUSH1 0x40 SWAP1 DUP2 MSTORE DUP2 MLOAD PUSH1 0x20 DUP4 ADD MLOAD SWAP2 SWAP1 SWAP3 ADD MLOAD PUSH1 0x0 DUP1 SLOAD PUSH1 0x1 PUSH1 0xA0 PUSH1 0x2 EXP SUB NOT AND CALLER OR DUP2 SSTORE PUSH1 0x5 SWAP3 SWAP1 SWAP3 SSTORE PUSH1 0x2 SWAP2 SWAP1 SWAP2 SSTORE PUSH1 0x1 DUP1 SLOAD PUSH1 0x1 PUSH1 0xA0 PUSH1 0x2 EXP SUB SWAP1 SWAP4 AND PUSH1 0x1 PUSH1 0xB0 PUSH1 0x2 EXP SUB NOT SWAP3 ISZERO ISZERO PUSH23 0x100000000000000000000000000000000000000000000 MUL PUSH1 0xB0 PUSH1 0x2 EXP PUSH1 0xFF MUL NOT SWAP1 SWAP5 AND SWAP4 SWAP1 SWAP4 OR SWAP2 SWAP1 SWAP2 AND SWAP2 SWAP1 SWAP2 OR SWAP1 SSTORE TIMESTAMP PUSH1 0x3 SSTORE PUSH2 0x626 DUP1 PUSH2 0xA1 PUSH1 0x0 CODECOPY PUSH1 0x0 RETURN STOP PUSH1 0x80 PUSH1 0x40 MSTORE PUSH1 0x4 CALLDATASIZE LT PUSH2 0xCF JUMPI PUSH4 0xFFFFFFFF PUSH29 0x100000000000000000000000000000000000000000000000000000000 PUSH1 0x0 CALLDATALOAD DIV AND PUSH4 0xB97BC86 DUP2 EQ PUSH2 0xD4 JUMPI DUP1 PUSH4 0x12F53950 EQ PUSH2 0xFB JUMPI DUP1 PUSH4 0x403C9FA8 EQ PUSH2 0x124 JUMPI DUP1 PUSH4 0x522E1177 EQ PUSH2 0x139 JUMPI DUP1 PUSH4 0x590E1AE3 EQ PUSH2 0x14E JUMPI DUP1 PUSH4 0x76BF8044 EQ PUSH2 0x165 JUMPI DUP1 PUSH4 0x8A81694C EQ PUSH2 0x170 JUMPI DUP1 PUSH4 0x8DA5CB5B EQ PUSH2 0x1A1 JUMPI DUP1 PUSH4 0x953B8FB8 EQ PUSH2 0x1B6 JUMPI DUP1 PUSH4 0xA46F7D19 EQ PUSH2 0x1CB JUMPI DUP1 PUSH4 0xAC124081 EQ PUSH2 0x1E0 JUMPI DUP1 PUSH4 0xB1356488 EQ PUSH2 0x21E JUMPI DUP1 PUSH4 0xC24A0F8B EQ PUSH2 0x233 JUMPI DUP1 PUSH4 0xE77EF21F EQ PUSH2 0x248 JUMPI JUMPDEST PUSH1 0x0 DUP1 REVERT JUMPDEST CALLVALUE DUP1 ISZERO PUSH2 0xE0 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP PUSH2 0xE9 PUSH2 0x25D JUMP JUMPDEST PUSH1 0x40 DUP1 MLOAD SWAP2 DUP3 MSTORE MLOAD SWAP1 DUP2 SWAP1 SUB PUSH1 0x20 ADD SWAP1 RETURN JUMPDEST CALLVALUE DUP1 ISZERO PUSH2 0x107 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP PUSH2 0x110 PUSH2 0x263 JUMP JUMPDEST PUSH1 0x40 DUP1 MLOAD SWAP2 ISZERO ISZERO DUP3 MSTORE MLOAD SWAP1 DUP2 SWAP1 SUB PUSH1 0x20 ADD SWAP1 RETURN JUMPDEST CALLVALUE DUP1 ISZERO PUSH2 0x130 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP PUSH2 0xE9 PUSH2 0x273 JUMP JUMPDEST CALLVALUE DUP1 ISZERO PUSH2 0x145 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP PUSH2 0x110 PUSH2 0x278 JUMP JUMPDEST CALLVALUE DUP1 ISZERO PUSH2 0x15A JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP PUSH2 0x163 PUSH2 0x288 JUMP JUMPDEST STOP JUMPDEST PUSH2 0x163 PUSH1 0x4 CALLDATALOAD PUSH2 0x3BC JUMP JUMPDEST CALLVALUE DUP1 ISZERO PUSH2 0x17C JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP PUSH2 0x185 PUSH2 0x461 JUMP JUMPDEST PUSH1 0x40 DUP1 MLOAD PUSH1 0x1 PUSH1 0xA0 PUSH1 0x2 EXP SUB SWAP1 SWAP3 AND DUP3 MSTORE MLOAD SWAP1 DUP2 SWAP1 SUB PUSH1 0x20 ADD SWAP1 RETURN JUMPDEST CALLVALUE DUP1 ISZERO PUSH2 0x1AD JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP PUSH2 0x185 PUSH2 0x470 JUMP JUMPDEST CALLVALUE DUP1 ISZERO PUSH2 0x1C2 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP PUSH2 0xE9 PUSH2 0x47F JUMP JUMPDEST CALLVALUE DUP1 ISZERO PUSH2 0x1D7 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP PUSH2 0xE9 PUSH2 0x485 JUMP JUMPDEST CALLVALUE DUP1 ISZERO PUSH2 0x1EC JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP PUSH2 0x1F8 PUSH1 0x4 CALLDATALOAD PUSH2 0x48B JUMP JUMPDEST PUSH1 0x40 DUP1 MLOAD SWAP4 DUP5 MSTORE PUSH1 0x1 PUSH1 0xA0 PUSH1 0x2 EXP SUB SWAP1 SWAP3 AND PUSH1 0x20 DUP5 ADD MSTORE DUP3 DUP3 ADD MSTORE MLOAD SWAP1 DUP2 SWAP1 SUB PUSH1 0x60 ADD SWAP1 RETURN JUMPDEST CALLVALUE DUP1 ISZERO PUSH2 0x22A JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP PUSH2 0xE9 PUSH2 0x4B5 JUMP JUMPDEST CALLVALUE DUP1 ISZERO PUSH2 0x23F JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP PUSH2 0xE9 PUSH2 0x4BB JUMP JUMPDEST CALLVALUE DUP1 ISZERO PUSH2 0x254 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP PUSH2 0x163 PUSH2 0x4C1 JUMP JUMPDEST PUSH1 0x3 SLOAD DUP2 JUMP JUMPDEST PUSH1 0x1 SLOAD PUSH1 0xA0 PUSH1 0x2 EXP SWAP1 DIV PUSH1 0xFF AND DUP2 JUMP JUMPDEST ADDRESS BALANCE SWAP1 JUMP JUMPDEST PUSH1 0x1 SLOAD PUSH1 0xA8 PUSH1 0x2 EXP SWAP1 DIV PUSH1 0xFF AND DUP2 JUMP JUMPDEST PUSH1 0x0 DUP1 SLOAD PUSH1 0x1 PUSH1 0xA0 PUSH1 0x2 EXP SUB AND CALLER EQ ISZERO DUP1 PUSH2 0x2AC JUMPI POP PUSH1 0x1 SLOAD PUSH1 0xA8 PUSH1 0x2 EXP SWAP1 DIV PUSH1 0xFF AND JUMPDEST DUP1 PUSH2 0x2C0 JUMPI POP PUSH1 0x1 SLOAD PUSH1 0xA0 PUSH1 0x2 EXP SWAP1 DIV PUSH1 0xFF AND JUMPDEST DUP1 PUSH2 0x2CD JUMPI POP PUSH1 0x5 SLOAD ADDRESS BALANCE GT JUMPDEST ISZERO PUSH2 0x2D7 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST POP PUSH1 0x0 JUMPDEST PUSH1 0x2 SLOAD DUP2 LT ISZERO PUSH2 0x374 JUMPI PUSH1 0x0 DUP2 DUP2 MSTORE PUSH1 0x8 PUSH1 0x20 MSTORE PUSH1 0x40 SWAP1 KECCAK256 PUSH1 0x1 DUP2 ADD SLOAD SWAP1 SLOAD PUSH1 0x1 PUSH1 0xA0 PUSH1 0x2 EXP SUB SWAP1 SWAP2 AND SWAP1 PUSH2 0x8FC SWAP1 PUSH1 0x64 SWAP1 PUSH1 0x60 MUL DIV SWAP1 DUP2 ISZERO MUL SWAP1 PUSH1 0x40 MLOAD PUSH1 0x0 PUSH1 0x40 MLOAD DUP1 DUP4 SUB DUP2 DUP6 DUP9 DUP9 CALL POP POP PUSH1 0x0 DUP1 SLOAD DUP6 DUP3 MSTORE PUSH1 0x8 PUSH1 0x20 MSTORE PUSH1 0x40 DUP1 DUP4 KECCAK256 SLOAD SWAP1 MLOAD PUSH1 0x1 PUSH1 0xA0 PUSH1 0x2 EXP SUB SWAP1 SWAP3 AND SWAP6 POP PUSH1 0x64 PUSH1 0x4 SWAP1 SWAP2 MUL DIV DUP1 ISZERO PUSH2 0x8FC MUL SWAP5 POP SWAP3 POP SWAP1 DUP2 DUP2 DUP2 DUP6 DUP9 DUP9 CALL SWAP4 POP POP POP POP POP DUP1 PUSH1 0x1 ADD SWAP1 POP PUSH2 0x2DB JUMP JUMPDEST POP PUSH1 0x1 DUP1 SLOAD PUSH22 0xFF000000000000000000000000000000000000000000 NOT PUSH21 0xFF0000000000000000000000000000000000000000 NOT SWAP1 SWAP2 AND PUSH1 0xA0 PUSH1 0x2 EXP OR AND PUSH1 0xA8 PUSH1 0x2 EXP OR SWAP1 SSTORE JUMP JUMPDEST CALLVALUE ISZERO DUP1 PUSH2 0x3D2 JUMPI POP PUSH1 0x1 SLOAD PUSH1 0xA8 PUSH1 0x2 EXP SWAP1 DIV PUSH1 0xFF AND JUMPDEST DUP1 PUSH2 0x3E6 JUMPI POP PUSH1 0x1 SLOAD PUSH1 0xA0 PUSH1 0x2 EXP SWAP1 DIV PUSH1 0xFF AND JUMPDEST ISZERO PUSH2 0x3F0 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST PUSH1 0x40 DUP1 MLOAD PUSH1 0x60 DUP2 ADD DUP3 MSTORE CALLVALUE DUP2 MSTORE CALLER PUSH1 0x20 DUP1 DUP4 ADD SWAP2 DUP3 MSTORE DUP3 DUP5 ADD SWAP5 DUP6 MSTORE PUSH1 0x2 DUP1 SLOAD PUSH1 0x0 SWAP1 DUP2 MSTORE PUSH1 0x8 SWAP1 SWAP3 MSTORE SWAP4 SWAP1 KECCAK256 SWAP2 MLOAD DUP3 SSTORE MLOAD PUSH1 0x1 DUP1 DUP4 ADD DUP1 SLOAD PUSH20 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF NOT AND PUSH1 0x1 PUSH1 0xA0 PUSH1 0x2 EXP SUB SWAP1 SWAP4 AND SWAP3 SWAP1 SWAP3 OR SWAP1 SWAP2 SSTORE SWAP3 MLOAD SWAP1 DUP3 ADD SSTORE DUP1 SLOAD SWAP1 SWAP2 ADD SWAP1 SSTORE JUMP JUMPDEST PUSH1 0x1 SLOAD PUSH1 0x1 PUSH1 0xA0 PUSH1 0x2 EXP SUB AND DUP2 JUMP JUMPDEST PUSH1 0x0 SLOAD PUSH1 0x1 PUSH1 0xA0 PUSH1 0x2 EXP SUB AND DUP2 JUMP JUMPDEST PUSH1 0x5 SLOAD DUP2 JUMP JUMPDEST PUSH1 0x2 SLOAD DUP2 JUMP JUMPDEST PUSH1 0x8 PUSH1 0x20 MSTORE PUSH1 0x0 SWAP1 DUP2 MSTORE PUSH1 0x40 SWAP1 KECCAK256 DUP1 SLOAD PUSH1 0x1 DUP3 ADD SLOAD PUSH1 0x2 SWAP1 SWAP3 ADD SLOAD SWAP1 SWAP2 PUSH1 0x1 PUSH1 0xA0 PUSH1 0x2 EXP SUB AND SWAP1 DUP4 JUMP JUMPDEST PUSH1 0x4 SLOAD SWAP1 JUMP JUMPDEST PUSH1 0x4 SLOAD DUP2 JUMP JUMPDEST PUSH1 0x0 SLOAD PUSH1 0x1 PUSH1 0xA0 PUSH1 0x2 EXP SUB AND CALLER EQ ISZERO DUP1 PUSH2 0x4E4 JUMPI POP PUSH1 0x1 SLOAD PUSH1 0xA8 PUSH1 0x2 EXP SWAP1 DIV PUSH1 0xFF AND JUMPDEST DUP1 PUSH2 0x4F8 JUMPI POP PUSH1 0x1 SLOAD PUSH1 0xA0 PUSH1 0x2 EXP SWAP1 DIV PUSH1 0xFF AND JUMPDEST DUP1 PUSH2 0x505 JUMPI POP PUSH1 0x5 SLOAD ADDRESS BALANCE LT JUMPDEST ISZERO PUSH2 0x50F JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST PUSH1 0x1 DUP1 SLOAD PUSH23 0x100000000000000000000000000000000000000000000 SWAP1 DIV PUSH1 0xFF AND ISZERO ISZERO EQ PUSH2 0x5A8 JUMPI PUSH1 0x64 PUSH1 0x7 ADDRESS BALANCE MUL DIV PUSH1 0x6 SSTORE PUSH1 0x64 PUSH1 0x5D ADDRESS BALANCE MUL DIV PUSH1 0x7 SSTORE PUSH1 0x0 DUP1 SLOAD PUSH1 0x6 SLOAD PUSH1 0x40 MLOAD PUSH1 0x1 PUSH1 0xA0 PUSH1 0x2 EXP SUB SWAP1 SWAP3 AND SWAP3 DUP2 ISZERO PUSH2 0x8FC MUL SWAP3 SWAP1 DUP2 DUP2 DUP2 DUP6 DUP9 DUP9 CALL POP POP PUSH1 0x1 SLOAD PUSH1 0x7 SLOAD PUSH1 0x40 MLOAD PUSH1 0x1 PUSH1 0xA0 PUSH1 0x2 EXP SUB SWAP1 SWAP3 AND SWAP5 POP DUP1 ISZERO PUSH2 0x8FC MUL SWAP4 POP SWAP2 POP PUSH1 0x0 DUP2 DUP2 DUP2 DUP6 DUP9 DUP9 CALL SWAP4 POP POP POP POP POP PUSH2 0x5D3 JUMP JUMPDEST PUSH1 0x0 DUP1 SLOAD PUSH1 0x40 MLOAD PUSH1 0x1 PUSH1 0xA0 PUSH1 0x2 EXP SUB SWAP1 SWAP2 AND SWAP2 ADDRESS BALANCE DUP1 ISZERO PUSH2 0x8FC MUL SWAP3 SWAP1 SWAP2 DUP2 DUP2 DUP2 DUP6 DUP9 DUP9 CALL POP POP POP POP POP JUMPDEST PUSH1 0x1 DUP1 SLOAD PUSH22 0xFF000000000000000000000000000000000000000000 NOT AND PUSH1 0xA8 PUSH1 0x2 EXP OR SWAP1 SSTORE JUMP STOP LOG1 PUSH6 0x627A7A723058 KECCAK256 GT 0xf8 PUSH20 0x11521F22D06E122863226F537A9BF4D84B435267 CALLDATALOAD 0xeb RETURNDATACOPY PUSH6 0xDAB7A7076200 0x29 ",
    "sourceMap": "67:2279:0:-;;;572:325;;;;;;;;;;;;;;;;;;;;;;;;665:5;:18;;-1:-1:-1;;;;;;665:18:0;673:10;665:18;;;690:12;:28;;;;725:10;:14;;;;665:18;746:19;;-1:-1:-1;;;;;818:24:0;;;-1:-1:-1;;;;;;746:19:0;;;;;-1:-1:-1;;;;;;746:19:0;;;;;;;818:24;;;;;;;;;;861:3;-1:-1:-1;849:15:0;67:2279;;;;;;"
}";

    var abi ="[
    {
        "constant": true,
        "inputs": [],
        "name": "startDate",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "refunded",
        "outputs": [
            {
                "name": "",
                "type": "bool"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "getPot",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "complete",
        "outputs": [
            {
                "name": "",
                "type": "bool"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [],
        "name": "refund",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "_message",
                "type": "bytes32"
            }
        ],
        "name": "pledge",
        "outputs": [],
        "payable": true,
        "stateMutability": "payable",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "benefactor",
        "outputs": [
            {
                "name": "",
                "type": "address"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "owner",
        "outputs": [
            {
                "name": "",
                "type": "address"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "targetAmount",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "numPledges",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "name": "pledges",
        "outputs": [
            {
                "name": "amount",
                "type": "uint256"
            },
            {
                "name": "eth_address",
                "type": "address"
            },
            {
                "name": "message",
                "type": "bytes32"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "getEndDate",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "endDate",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [],
        "name": "drawdown",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "name": "_benefactor",
                "type": "address"
            },
            {
                "name": "_targetAmount",
                "type": "uint256"
            },
            {
                "name": "payType",
                "type": "bool"
            }
        ],
        "payable": true,
        "stateMutability": "payable",
        "type": "constructor"
    }
]";
    
    var myContract;

    function createExampleContract() {
        // hide create button
        document.getElementById('create').style.visibility = 'hidden'; 
        document.getElementById('code').innerText = code;
        // let's assume that coinbase is our account
        web3.eth.defaultAccount = "0xf827273cf48f1f4bd0c7f5865ea1f3516baa9d77";
        // create contract
        document.getElementById('status').innerText = "transaction sent, waiting for confirmation";
        web3.eth.contract(abi).new({data: code}, function (err, contract) {
            if(err) {
                console.error(err);
                return;
            // callback fires twice, we only want the second call when the contract is deployed
            } else if(contract.address){
                myContract = contract;
                document.write('address: ' + myContract.address);
                document.getElementById('status').innerText = 'Mined!';
                document.getElementById('call').style.visibility = 'visible';
            }
        });
    }
    function callExampleContract() {
        // this should be generated by ethereum
        var param = parseInt(document.getElementById('value').value);
        // call the contract
        var res = myContract.multiply(param);
        document.getElementById('result').innerText = res.toString(10);
    }
</script>
</head>
<body>
    <h1>contract</h1>
    <div id="code"></div> 
    <div id="status"></div>
    <div id='create'>
        <button type="button" onClick="createExampleContract();">create example contract</button>
    </div>
    <div id='call' style='visibility: hidden;'>
        <input type="number" id="value" onkeyup='callExampleContract()'></input>
    </div>
    <div id="result"></div>
</body>
</html>
